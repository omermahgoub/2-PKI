Welcome to the tutorial on MBR and GPT partition tables. A partition table forms the low level data structure of a drive. By the end of this video, you will understand what partition tables are available and what features each offer.

### Partition Tables
Before a drive can be used by an operating system, whether it be physical or virtual, a partition table needs to be created on the drive. The partition table forms the low level data structure of the drive. This structure allows the drive to be divided up into individual partitions. If I were to have a physical drive that has a partition table created on it, the drive will contain only unused space. Before the unused space can be used, the drive needs to be divided up into one or more partitions. In this case, the drive will be divided up into 3 partitions. In many cases, it is common for a hard drive to be divided up into one large, main partition for the operating system and its data, and some smaller partitions for booting, recovery, and tools. After creation, a partition table can be formatted for the operating system to store data on. There are two partition tables that are available. These are MBR and GPT. MBR is older and this has more compatibility with older and obsolete operating systems and hardware. GPT is a newer standard and has more features but requires newer operating systems and, depending on what you are trying to achieve with it, it may also require newer hardware. To start with, I will look at MBR.

### Master Boot Record (MBR)
The MBR or Master Boot Record, was first introduced on PC’s back in 1983. Since then it has become the de facto standard for PC’s working on DOS based, Windows based, and alternative operating systems like Linux. If the MBR partition table is used, this allows the drive to be divided up into a maximum for 4 primary partitions. The operating system allows each partition to be formatted to use a file system. So with MBR, the administrator could create 4 primary partitions and format them so the operating system can see 4 drives. In most cases, this should be sufficient for most requirements. However, in some rare cases it may be necessary for more than 4 partitions. If this is the case, one of the primary partitions can be changed into an extended partition. In the DOS days, this extended partition could hold 23 partitions. This was a limitation of DOS since it could only support 26 drive letters. On modern Windows operating systems, the administrators can create as many extended partitions as they wish. However, extended partitions are linked to each other so if you use a lot of them they could have an impact on performance. Also, the BIOS in the computer may not support booting from an extended partition; however, a workaround would be to place the boot loader on a primary partition that would boot the operating system stored in the extended partition. The MBR partition table offers the fundamental features required for an operating system and offers compatibility with older operating systems and hardware. The only limitation is that it is limited to 2 Terabytes of usable space. If the administrator uses MBR on a drive larger than 2 Terabytes, all the space after Terabytes will be unavailable to the operating system and thus unusable. There is some new technology that has been developed to extend the life of MBR which I will look at later on in this video. Before this, I will have a look at MBR’s replacement, GPT.

### GUID Partition Table (GPT)
The replacement for MBR is GPT or GUID Partition table. Using Windows, GPT support 128 partitions. To be more specific, Windows uses the minimum default settings using GPT. The standard for GPT allows an unlimited number of partitions. So using an alternative operating system, the administrator could potentially have access to more than 128 partitions. Why you would need more than that, I can’t really say. The biggest difference with GPT is that it supports drives up to a Zettabyte. It is not limited to 2 terabytes like MBR. The actual amount may vary a little depending on how large the drive manufacturer makes the sectors. Currently, as there are only terabyte drives on the market, it’s not possible to reach a Zettabyte. First a Petabyte and Exabyte drive would need to have been created before we could even get close to a Zettabyte hard disk

In order to boot an operating system using GPT, a few requirements need to be met. First the computer needs to support Unified Extensible Firmware Interface or UEFI. UEFI was designed to be a replacement to BIOS; however, UEFI generally does require 64-bit (x64) hardware. It is possible to run UEFI on 32-bit (x86) hardware but manufacturers generally don’t use UEFI on 32-bit systems. To boot Windows using a drive with a GPT partition table, you will need Windows XP professional 64-bit (x64) or Windows Server 2003 64-bit (x64) or above. If you are using Linux, most modern 32-bit and 64-bit Linux systems will support booting from GPT hard disks or the GPT hard drive being used as a data drive. You will need to check the details of your particular distribution to see it if is supported. If your computer does not meet these requirements, it may still be possible to use a GPT drive as a data drive. For Windows, this requires Windows Vista or Windows Server 2003 with Service Pack 1 or above. Data drives using GPT do not require a 64-bit version of Windows or 64-bit hardware. Many Linux distributions support GPT drives as a data drive, however you need to check the individual distribution to confirm it is supported. You can see GPT addresses the issue of MBR only being able to be used on drives up to 2 Terabytes in size. However, in order to do this, it requires hardware and software support. So what do you do if you need to use more than 2 Terabytes on MBR?

### Advanced Format
To improve support for larger drives with older hardware, Advanced Format was developed and is available for use with all hard drives manufactured since 2011. This potentially allows hard disks larger than 2 Terabytes to be used on older hardware and software that does not support GPT.

To better understand how this advanced format works, I will first look at how it works without advanced format. When an MBR partition table is used, it uses 32 bits to hold its data. The largest sector that can be used is 1512 bytes. This gives us a total limit of 2 Terabytes in size. You can see this is where the 2 Terabyte limit comes from. A limit imposed by MBR of 32 bits and a sector size of 512 bytes.

So how does the advanced format bypass this limit while still working with old hardware? When using a drive with advanced format, you still have a limit of 32 bits and 512 bytes, this is what the older hardware expects and supports. However, the firmware on the drive allocates each block of data as eight 512 byte sectors. Because of this the hardware is accessing a 512 byte sector but in reality it is accessing eight 512 byte sectors making the sector 4 kilobytes in size. The end result is that the old hardware can be fully utilized up to 16 Terabytes of data on the drive. This allows larger drives to be used with old hardware but it is not without some problems.

### Hybrid MBR
On the older operating systems, the drive will need to be partitioned with Hybrid MBR in order to use more than 2 Terabytes. Unfortunately, Windows does not have the ability to format a drive in this way, you will need to format the drive using an alternative operating system. It may be possible, for example, to format the drive in Linux and use it in Windows as a data drive. To use the drive for booting is difficult, but not impossible to implement. Other operating systems may support this format, but you would need to perform your own checks to see if it does and how well it is supported. Many disk utilities will expect a 512 byte sector and will not understand what is happening when they encounter the larger 4 kilobyte sector. Even attempting to *use* a disk utility that doesn’t support this format may damage the data on the drive as the disk utility tries to correct a problem that is not there. This applies to Linux and Windows utilities.


### Converting Between MBR and GPT

In the real world, if you have a drive less than 2 Terabytes, MBR should meet all your needs. There is no need to change to GPT. If, however, you do find that you need to convert between the two, it is possible in Windows; however, this will require all the existing partitions to be deleted which will erase all the data on the drive. If you are using Linux, it is possible to convert the partition table without losing data; however, you should always backup your data beforehand just in case. Lastly, there is 3rd party software available that will perform the conversion if you are willing to pay for it. Paragon offers free software that will do the conversion between MBR and GPT for home use. You may also look at some of the free Linux distributions to achieve the same result.

Conclusion
Next tutorial, I will look at how disk management with MBR and GPT works in Windows. I hope you enjoyed the video and found it useful and hope to see you in next video. Bye for now.


**References**
“Installing and Configuring Windows Server 2012 Exam Ref 70-410” pg 42 – 43 

[GUID Partition Table](http://en.wikipedia.org/wiki/GUID_Partition_Table)

[Partition table](http://en.wikipedia.org/wiki/Partition_table)

[Extended boot record](http://en.wikipedia.org/wiki/Extended_boot_record)

[Windows support for hard disks that are larger than 2 TB](http://support.microsoft.com/kb/2581408)

[GUID Partition Table](http://en.wikipedia.org/wiki/GUID_Partition_Table)

[Advanced Format](http://en.wikipedia.org/wiki/Advanced_Format)

[Windows and GPT FAQ](https://msdn.microsoft.com/en-us/library/windows/hardware/dn640535(v=vs.85).aspx#gpt_faq_how_many_partitions
